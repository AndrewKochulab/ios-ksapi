machine:
  xcode:
    version: 7.3
checkout:
  post:
    - git submodule sync
    - git submodule update --init --recursive || (rm -fr .git/config .git/modules && git submodule deinit -f . && git submodule update --init --recursive)
dependencies:
  override:
    - git submodule sync --recursive
    - git submodule update --init --recursive
test:
  override:
    - bin/test iOS
    - bin/test tvOS
experimental:
  notify:
    branches:
      only:
        - master
